language: csharp
mono:
  - latest

os:
  - linux

compiler: 
  - g++
  - clang++

addons:
  apt:
    sources:
    - deadsnakes
    - llvm-toolchain-precise-3.7
    - ubuntu-toolchain-r-test
    packages:
    - cmake
    - time
    - swig
    - clang-3.7
    - g++-5
    - gcc-5
    - 
install:
  - nuget restore TestSWIG.sln
  - nuget install NUnit.Runners -Version 2.6.4 -OutputDirectory testrunner

cache: apt

script:
  - swig -c++ -csharp -namespace LibraryNamespace -I./CPP/Library/ -outdir CSharp/CSharpLibrary/ -o CSharp/CSharpWrapper/SimpleAPIWrapper.cxx CSharp/SimplifiedAPI.i
  - if [ "$CXX" = "g++" ]; then export CXX==`which g++-5` CC=`which gcc-5`; fi
  - if [ "$CXX" = "clang++" ]; then export CXX=`which clang++-3.7` CC=`which clang-3.7`; fi
  - cmake -G "Unix Makefiles" ./
  - make -j2
  - cat Makefile
  - which g++-5
  - g++-5 --version
  - make install
  - xbuild /p:Configuration=Release ./CSharp/CSharpLibrary/CSharpLibrary.csproj
  - xbuild /p:Configuration=Release ./CSharp/Tests/Tests.csproj
  - mono ./testrunner/NUnit.Runners.2.6.4/tools/nunit-console.exe ./Build/Release/CSharpTests.dll

